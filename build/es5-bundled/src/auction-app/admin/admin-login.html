<html><head><link rel="import" href="../../../bower_components/polymer/polymer-element.html"></head><body><dom-module id="admin-login"><template><style>:host{width:100vw;height:calc(100vh - 26px);display:flex;justify-content:center;align-items:center;box-sizing:border-box;}.container{padding:10px;border:1px solid #ddd;min-width:25rem;box-sizing:border-box;}.logo{display:flex;flex-direction:column;justify-content:center;align-items:center;}.logo p{font-size:20px;font-weight:500;margin:10px;}.login{cursor:pointer;text-align:center;line-height:50px;color:#fff;height:50px;background-color:var(--button-background-color);margin:10px auto;border-radius:4px;font-size:18px;}.info{display:flex;flex-direction:column;}.fail{color:red;}</style><section><div class="container"><div class="logo"><img src="../../../images/logo-red.png" alt=""><p>拍賣車輛管理系統</p></div><div class="info"><vaadin-text-field label="賬 號" value="{{account}}" required=""></vaadin-text-field><vaadin-password-field label="密 碼" value="{{password}}" required="" on-keypress="keypress"></vaadin-password-field><vaadin-checkbox checked="{{isRecord}}">記住賬號和密碼</vaadin-checkbox></div><div class="fail" hidden="{{!loginFail}}">帳號名或密碼錯誤</div><div class="login" on-click="_login" on-keypress="keypress">登陆</div></div></section><iron-ajax id="loginAjax" url="{{setUrl('j_spring_security')}}" method="POST" content-type="application/x-www-form-urlencoded" on-response="_responLogin"></iron-ajax></template><script>var AdminLogin=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_responLogin',value:function(a){var b=a.detail.response;'Success'==b.status?(this.loginFail=!1,this.adminHeader['X-CustomToken']=b.value,this.adminHeader['X-ADMIN-USERNAME']=this.account,localStorage.setItem('adminHeader',JSON.stringify(this.adminHeader)),this.dispatchEvent(new CustomEvent('pathchange',{detail:{path:'/admin/admin-home'},bubbles:!0,composed:!0}))):(this.loginFail=!0,this.account='',this.password='')}},{key:'_login',value:function(){this.account&&this.password&&(this.$.loginAjax.body={j_admin_username:this.account,j_admin_password:this.password},this.$.loginAjax.generateRequest())}},{key:'keypress',value:function(a){var b=a.which||a.keyCode;13===b&&this._login()}}],[{key:'is',get:function(){return'admin-login'}},{key:'properties',get:function(){return{isRecord:{type:Boolean,value:!0},loginFail:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return[]}}]),b}(AuctionMixin(Polymer.Element));window.customElements.define(AdminLogin.is,AdminLogin);</script></dom-module></body></html>