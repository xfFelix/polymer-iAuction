<html><head><link rel="import" href="../../../bower_components/polymer/polymer-element.html"><link rel="import" href="admin-login.html"><link rel="import" href="admin-home.html"><link rel="import" href="admin-car-detail.html"><link rel="import" href="admin-ele/admin-header.html"></head><body><dom-module id="admin-page"><template><style include="shared-styles">:host{display:block;min-height:calc(100vh - 26px);}paper-dialog{}</style><paper-dialog id="simpledialog" modal=""><h2>登陸失效，請重新登陸；</h2></paper-dialog><admin-header hidden="{{!showHeader}}"></admin-header><iron-pages selected="{{subPage}}" attr-for-selected="page"><admin-login page="admin-login"></admin-login><admin-home page="admin-home" path="{{subPage}}"></admin-home><admin-car-detail page="admin-car-detail" path="{{subPage}}" uid="{{uid}}"></admin-car-detail></iron-pages></template><script>var AdminPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_checkPage',value:function(a,b){'admin'==b&&(localStorage.adminHeader&&(adminHeader=JSON.parse(localStorage.getItem('adminHeader'))),this.updateAdminHeader(adminHeader['X-ADMIN-USERNAME'],adminHeader['X-CustomToken']),this.subPage=adminHeader['X-CustomToken']?a?a:'admin-home':a?a:'admin-login')}},{key:'pageChange',value:function(a){a&&(this.showHeader='admin-login'!=a)}},{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('login-fail',this.loginFail)}},{key:'loginFail',value:function(){this.$.simpledialog.open(),setTimeout(function(){localStorage.removeItem('adminHeader'),location.href='/admin/admin-login'},2e3)}}],[{key:'is',get:function(){return'admin-page'}},{key:'properties',get:function(){return{view:{type:String},subRoute:{type:String},subPage:{type:String,observer:'pageChange'},showHeader:{type:String,value:!1},uid:{type:String}}}},{key:'observers',get:function(){return['_checkPage(subRoute,view)']}}]),b}(AuctionMixin(Polymer.Element));window.customElements.define(AdminPage.is,AdminPage);</script></dom-module></body></html>