<html><head><link rel="import" href="../../../bower_components/polymer/polymer-element.html"><link rel="import" href="admin-ele/admin-list-container.html"><link rel="import" href="admin-ele/admin-toolbar.html"><link rel="import" href="admin-ele/admin-car.html"></head><body><dom-module id="admin-home"><template><style include="shared-styles">a{color:#fff;}</style><admin-toolbar><a class="loginOut" on-click="_logout">&lt;&lt; 退出登陸 </a><a class="addCar" on-click="_addCar" href="/admin/admin-car-detail/new">+ 添加車輛</a></admin-toolbar><admin-list-container><span slot="name">車輛列表</span> <span slot="num">({{total}})</span><template is="dom-repeat" items="{{carList}}"><admin-car data="{{item}}" on-car-action="_carAction"></admin-car></template></admin-list-container><iron-ajax id="getList" url="{{setUrl('admin/getVehicle')}}" body="{}" method="POST" headers="{{adminHeader}}" content-type="application/json" on-response="_responList"></iron-ajax><iron-ajax id="releaseVehicle" url="{{setUrl('admin/releaseVehicle')}}" method="POST" headers="{{adminHeader}}" content-type="application/json" on-response="_responRealse"></iron-ajax><iron-ajax id="unReleaseVehicle" url="{{setUrl('admin/unReleaseVehicle')}}" method="POST" headers="{{adminHeader}}" content-type="application/json" on-response="_responUnRealse"></iron-ajax><iron-ajax id="deleteVehicle" url="{{setUrl('admin/deleteVehicle')}}" method="POST" headers="{{adminHeader}}" content-type="application/json" on-response="_responDel"></iron-ajax></template><script>var AdminHome=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this)}},{key:'_responRealse',value:function(){this.dispatchEvent(new CustomEvent('confirm',{detail:{msg:'\u4FDD\u5B58\u6210\u529F'},bubbles:!0,composed:!0})),this.$.getList.generateRequest()}},{key:'_responUnRealse',value:function(){this.dispatchEvent(new CustomEvent('confirm',{detail:{msg:'\u4FDD\u5B58\u6210\u529F'},bubbles:!0,composed:!0})),this.$.getList.generateRequest()}},{key:'_responDel',value:function(){this.dispatchEvent(new CustomEvent('confirm',{detail:{msg:'\u4FDD\u5B58\u6210\u529F'},bubbles:!0,composed:!0})),this.$.getList.generateRequest()}},{key:'_carAction',value:function(a){var b=a.detail.type,c=a.detail.uid;switch(b){case'1':this.$.releaseVehicle.body={uid:c},this.$.releaseVehicle.generateRequest();break;case'2':this.$.unReleaseVehicle.body={uid:c},this.$.unReleaseVehicle.generateRequest();break;case'3':this.$.deleteVehicle.body={uid:c},this.$.deleteVehicle.generateRequest();break;case'4':}}},{key:'_responList',value:function(a){this.carList=a.detail.response,this.total=this.carList.length}},{key:'_checkPath',value:function(a){'admin-home'==a&&this.$.getList.generateRequest()}},{key:'_logout',value:function(){localStorage.removeItem('adminHeader'),this.dispatchEvent(new CustomEvent('pathchange',{detail:{path:'/admin/admin-login'},bubbles:!0,composed:!0}))}},{key:'_addCar',value:function(){}}],[{key:'is',get:function(){return'admin-home'}},{key:'properties',get:function(){return{path:{type:String,observer:'_checkPath'},carList:{type:Array,value:function(){return[]}}}}},{key:'observers',get:function(){return[]}}]),b}(AuctionMixin(Polymer.Element));window.customElements.define(AdminHome.is,AdminHome);</script></dom-module></body></html>